## 解决冲突

在上一个节我们提及到，执行合并即可自动合并Git修改的部分。但是，也存在无法自动合并的情况。

如果远程数据库和本地数据库的同一个地方都发生了修改的情况下，因为无法自动判断要选用哪一个修改，所以就会发生冲突。

Git会在发生冲突的地方修改文件的内容，如下图。所以我们需要手动修正冲突。

![](https://backlog.com/git-tutorial/cn/img/post/intro/capture_intro5_1_3.png)

> ==分割线上方是本地数据库的内容,
下方是远程数据库的编辑内容。

如下图所示，修正所有冲突的地方之后，执行提交。

![](https://backlog.com/git-tutorial/cn/img/post/intro/capture_intro5_1_4.png)

## 解决demo与demo2的冲突

**用demo进行的操作**

请执行以下指令。

```
$ git pull origin master
Username: <用户名>
Password: <密码>
remote: Counting objects: 5, done.
remote: Compressing objects: 100% (2/2), done.
remote: Total 3 (delta 0), reused 0 (delta 0)
Unpacking objects: 100% (3/3), done.
From https://gitee.com/liuwantao/demo.git
 * branch            master     -> FETCH_HEAD
Auto-merging a.txt
CONFLICT (content): Merge conflict in a.txt
Automatic merge failed; fix conflicts and then commit the result.
```

显示合并时发生冲突的讯息。

讯息显示「Merge conflict in a.txt」。a.txt文件，我们看到Git已添加标示以显示冲突部分。请为Git无法完成主动合并的部分做以下的修改。

```
学习Git
add 把变更录入到索引中
<<<<<<< HEAD
commit 记录索引的状态
=======
pull 取得远端数据库的内容
>>>>>>> 4c0182374230cd6eaa93b30049ef2386264fe12a
```

> 使用 `git diff` 命令也可以查看修改的地方， 比如 `git diff a.txt`

导入两方的修改，并删除多余的标示行以解决冲突。

```
学习Git
add 把变更录入到索引中
commit 记录索引的状态
pull 取得远端数据库的内容
```

文件的内容发生了修改，所以需要进行提交。

```
$ git add a.txt
$ git commit -m "合并"
[master d845b81] 合并
```

这样就完成了从远程数据库导入最新的修改内容。

我们可以用log命令来确认数据库的历史记录是否准确。指定--graph选项，能以文本形式显示更新记录的流程图。指定--oneline选项，能在一行中显示提交的信息。

```
$ git log --graph --oneline
*   d845b81 合并
|\
| * 4c01823 添加pull的说明
* | 95f15c9 添加commit的说明
|/
* 3da09c1 添加add的说明
* ac56e47 first commit
```

> 可以为 `git log --graph --oneline` 设置一个别名，方便以后使用
>
>执行命令 `git config --global alias.lg "log --graph --oneline"`
>
>再次使用，执行命令 `git lg` 即可

这表明两个修改记录已经整合了。

这时候，之前被拒绝的push应该可以通过了，push一下看看吧。
