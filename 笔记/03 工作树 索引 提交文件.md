## 工作树和索引

在Git管理下，大家实际操作的目录被称为工作树。

在数据库和工作树之间有索引，索引是为了向数据库提交作准备的区域。

![工作树和索引](https://backlog.com/git-tutorial/cn/img/post/intro/capture_intro1_4_1.png)

Git在执行提交的时候，不是直接将工作树的状态保存到数据库，而是将设置在中间索引区域的状态保存到数据库。因此，要提交文件，首先需要把文件加入到索引区域中。

所以，凭借中间的索引，可以避免工作树中不必要的文件提交，还可以将文件修改内容的一部分加入索引区域并提交。

## 提交文件

在demo目录新建一个文件，然后将文件添加到数据库。

首先在demo目录里新建一个名为「a.txt」的文本文件，请在文件中输入以下的内容：

```
学习Git
```

请使用status命令确认工作树和索引的状态。

```
$ git status
```

执行status命令以确认demo目录的状态。

```
$ git status
# On branch master
#
# Initial commit
#
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#     a.txt
nothing added to commit but untracked files present (use "git add" to track)
```

从status响应我们可以看到‘a.txt’目前不是历史记录对象。请首先把‘a.txt’加入到索引，就可以追踪它的变更了。

将文件加入到索引，要使用add命令。在<file>指定加入索引的文件。用空格分割可以指定多个文件。

```
$ git add <file>..
```

指定参数「.」，可以把所有的文件加入到索引。

```
$ git add .
```

现在，我们把a.txt加入到索引然后确认一下。

```
$ git add a.txt
$ git status
# On branch master
#
# Initial commit
#
# Changes to be committed:
#   (use "git rm --cached <file>..." to unstage)
#
#     new file:   a.txt
#
```

既然a.txt已加入到索引，我们就可以提交文件了。请执行如下显示的commit命令。

```
$ git commit -m "first commint"
```

> `-m` 参数为提交的说明, 建议不为空

执行commit命令之后确认状态。

```
$ git commit -m "first commit"
[master (root-commit) 116a286] first commit
 0 files changed, 0 insertions(+), 0 deletions(-)
 create mode 100644 a.txt

$ git status
# On branch master
nothing to commit (working directory clean)
```

从status响应我们可以看到没有新的变更要提交。

使用log命令，我们可以在数据库的提交记录看到新的提交。

```
$ git log
```